<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>LCMS District Comparison Map</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.min.js"></script>
<style>
body{margin:0;padding:20px;font-family:Arial,sans-serif;background:#f5f5f5}
.container{max-width:1200px;margin:0 auto;background:#fff;padding:30px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
h1{margin:0 0 10px 0}
.subtitle{color:#666;margin-bottom:20px}
#map{width:100%;height:600px;overflow:hidden}
.state{stroke:#fff;stroke-width:1px;cursor:pointer}
.tooltip{position:absolute;padding:12px;background:rgba(0,0,0,0.85);color:#fff;border-radius:6px;pointer-events:none;font-size:14px;opacity:0}
.tooltip.show{opacity:1}
.legend{display:flex;gap:20px;margin-bottom:20px;flex-wrap:wrap}
.legend-item{display:flex;gap:8px}
.legend-color{width:30px;height:20px;border:1px solid #ccc}
.data-toggle{padding:10px 20px;margin-right:10px;background:#f0f0f0;border:2px solid #ddd;border-radius:5px;cursor:pointer;font-weight:600}
.data-toggle:hover{background:#e0e0e0}
.data-toggle.active{background:#31a354;color:#fff;border-color:#31a354}
</style>
</head>
<body>
<div class="container">
<h1>LCMS District Comparison Map</h1>
<p class="subtitle">Interactive District Statistics (Fall 2025)</p>
<div style="margin-bottom:20px">
<button id="btn-congregations" class="data-toggle active" onclick="sw('congregations')">Congregations</button>
<button id="btn-members" class="data-toggle" onclick="sw('members')">Members</button>
<button id="btn-budget" class="data-toggle" onclick="sw('budget')">Budget</button>
</div>
<div class="legend">
<span style="font-weight:600">Legend:</span>
<div class="legend-item"><div class="legend-color" style="background:#edf8e9"></div><span>Lowest</span></div>
<div class="legend-item"><div class="legend-color" style="background:#bae4b3"></div><span>Low</span></div>
<div class="legend-item"><div class="legend-color" style="background:#74c476"></div><span>Medium</span></div>
<div class="legend-item"><div class="legend-color" style="background:#31a354"></div><span>High</span></div>
<div class="legend-item"><div class="legend-color" style="background:#006d2c"></div><span>Highest</span></div>
</div>
<div id="map"></div>
<div class="tooltip"></div>
</div>
<script>
var c='congregations',cg={'California-Nevada-Hawaii District':176,'Northwest District':240,'Pacific Southwest District':263,'SELC District':53,'English District':159,'Iowa East District':117,'Iowa West District':165,'Minnesota North District':194,'Minnesota South District':229,'Wisconsin North District':212,'Wisconsin South District':199,'Northern Illinois District':201,'Central Illinois District':149,'Southern Illinois District':93,'Rocky Mountain District':165,'Montana District':69,'North Dakota District':77,'South Dakota District':105,'Wyoming District':60,'Nebraska District':231,'Kansas District':154,'Oklahoma District':78,'Texas District':383,'Missouri District':287,'Indiana District':217,'Michigan District':345,'Ohio District':153,'Mid-South District':118,'Southern District':147,'Florida-Georgia District':193,'Southeastern District':219,'Eastern District':122,'New Jersey District':47,'Atlantic District':91,'New England District':65},mb={'California-Nevada-Hawaii District':25126,'Northwest District':36287,'Pacific Southwest District':58840,'SELC District':13391,'English District':34711,'Iowa East District':33064,'Iowa West District':49413,'Minnesota North District':43564,'Minnesota South District':95981,'Wisconsin North District':80938,'Wisconsin South District':79691,'Northern Illinois District':77143,'Central Illinois District':50375,'Southern Illinois District':33393,'Rocky Mountain District':34659,'Montana District':10265,'North Dakota District':16133,'South Dakota District':25989,'Wyoming District':8324,'Nebraska District':88967,'Kansas District':42493,'Oklahoma District':14136,'Texas District':100847,'Missouri District':106812,'Indiana District':83542,'Michigan District':146594,'Ohio District':40168,'Mid-South District':22120,'Southern District':18785,'Florida-Georgia District':40555,'Southeastern District':49916,'Eastern District':27445,'New Jersey District':7499,'Atlantic District':22645,'New England District':11356},bg={'California-Nevada-Hawaii District':2509722,'Northwest District':2133284,'Pacific Southwest District':2983113,'SELC District':494949,'English District':1719038,'Iowa East District':1425868,'Iowa West District':2384691,'Minnesota North District':1719811,'Minnesota South District':3108213,'Wisconsin North District':3425000,'Wisconsin South District':3210000,'Northern Illinois District':2240681,'Central Illinois District':2114216,'Southern Illinois District':1045000,'Rocky Mountain District':1968084,'Montana District':788352,'North Dakota District':1114142,'South Dakota District':1848362,'Wyoming District':878106,'Nebraska District':4589409,'Kansas District':1931468,'Oklahoma District':938000,'Texas District':7314724,'Missouri District':2634786,'Indiana District':2606108,'Michigan District':8001022,'Ohio District':1815293,'Mid-South District':3627302,'Southern District':992650,'Florida-Georgia District':3012075,'Southeastern District':3360000,'Eastern District':741272,'New Jersey District':1001734,'Atlantic District':1458751,'New England District':933458},m={'California':'California-Nevada-Hawaii District','Nevada':'California-Nevada-Hawaii District','Hawaii':'California-Nevada-Hawaii District','Washington':'Northwest District','Oregon':'Northwest District','Alaska':'Northwest District','Idaho':'Northwest District','Arizona':'Pacific Southwest District','Utah':'Rocky Mountain District','Colorado':'Rocky Mountain District','New Mexico':'Rocky Mountain District','Montana':'Montana District','North Dakota':'North Dakota District','South Dakota':'South Dakota District','Wyoming':'Wyoming District','Nebraska':'Nebraska District','Kansas':'Kansas District','Oklahoma':'Oklahoma District','Texas':'Texas District','Missouri':'Missouri District','Indiana':'Indiana District','Michigan':'Michigan District','Ohio':'Ohio District','West Virginia':'Ohio District','Kentucky':'Mid-South District','Tennessee':'Mid-South District','Arkansas':'Mid-South District','Louisiana':'Southern District','Mississippi':'Southern District','Alabama':'Southern District','Georgia':'Florida-Georgia District','Florida':'Florida-Georgia District','South Carolina':'Southeastern District','North Carolina':'Southeastern District','Virginia':'Southeastern District','Delaware':'Southeastern District','Maryland':'Southeastern District','Pennsylvania':'Eastern District','New Jersey':'New Jersey District','New York':'Atlantic District','Connecticut':'New England District','Rhode Island':'New England District','Massachusetts':'New England District','Vermont':'New England District','New Hampshire':'New England District','Maine':'New England District'};function gd(){return c=='congregations'?cg:c=='members'?mb:bg}function gl(){return c=='congregations'?'Congregations':c=='members'?'Members':'Budget'}function fm(v){if(c=='budget')return'$'+Math.round(v).toLocaleString();return Math.round(v).toLocaleString()}function gr(s){return m[s]||s}function gv(s){var r=gr(s),d=gd();return d[r]?d[r]:0}function gc(v){if(!v)return'#e0e0e0';if(c=='congregations'){if(v>300)return'#006d2c';if(v>200)return'#31a354';if(v>150)return'#74c476';if(v>100)return'#bae4b3';return'#edf8e9'}if(c=='members'){if(v>100000)return'#006d2c';if(v>75000)return'#31a354';if(v>40000)return'#74c476';if(v>20000)return'#bae4b3';return'#edf8e9'}if(v>5000000)return'#006d2c';if(v>3000000)return'#31a354';if(v>2000000)return'#74c476';if(v>1000000)return'#bae4b3';return'#edf8e9'}function ad(d){var ct=p.centroid(d);if(d.properties.name=='Alaska')return'translate('+(80-ct[0])+','+(120-ct[1])+')';if(d.properties.name=='Hawaii')return'translate('+(100-ct[0])+','+(350-ct[1])+')';return null}var w=1100,h=700,s=d3.select('#map').append('svg').attr('viewBox','-50 0 1200 750').style('display','block').style('max-width','100%').style('height','auto'),t=d3.select('.tooltip'),pr=d3.geoAlbersUsa().scale(1100).translate([w/2,h/2]),p=d3.geoPath().projection(pr);d3.json('https://cdn.jsdelivr.net/npm/us-atlas@3/states-10m.json').then(function(u){var st=topojson.feature(u,u.objects.states);s.append('g').selectAll('path').data(st.features).enter().append('path').attr('class',function(d){return'state region-'+gr(d.properties.name).replace(/\s+/g,'-')}).attr('d',p).attr('transform',ad).attr('fill',function(d){var n=d.properties.name;if(n=='Iowa'||n=='Minnesota'||n=='Wisconsin'||n=='Illinois')return'#e0e0e0';return gc(gv(n))}).attr('stroke','#fff').attr('stroke-width',1).attr('pointer-events',function(d){return(d.properties.name=='Iowa'||d.properties.name=='Minnesota'||d.properties.name=='Wisconsin'||d.properties.name=='Illinois')?'none':'all'}).on('mouseover',function(e,d){var n=d.properties.name;if(n=='Iowa'||n=='Minnesota'||n=='Wisconsin'||n=='Illinois')return;var r=gr(n),v=gv(n);s.selectAll('.region-'+r.replace(/\s+/g,'-')).style('stroke','#333').style('stroke-width','2px');t.html('<strong>'+r+'</strong><br/>'+gl()+': '+fm(v)).style('left',(e.pageX+10)+'px').style('top',(e.pageY-28)+'px').classed('show',true)}).on('mouseout',function(){s.selectAll('.state').style('stroke','#fff').style('stroke-width','1px');t.classed('show',false)});s.append('path').datum(topojson.mesh(u,u.objects.states,function(a,b){return a!=b})).attr('fill','none').attr('stroke','white').attr('stroke-width',1).attr('d',p);var n=[{name:'SELC District',x:130,y:500},{name:'English District',x:180,y:500}],i=st.features.find(function(d){return d.properties.name=='Iowa'});if(i){var b=p.bounds(i),x=b[0][0],mx=b[1][0],y=b[0][1],my=b[1][1],wd=mx-x,ht=my-y,sz=30,pd=10;n.push({name:'Iowa East District',x:mx-sz-pd,y:y+(ht/2)-(sz/2)},{name:'Iowa West District',x:x+pd,y:y+(ht/2)-(sz/2)})}var mn=st.features.find(function(d){return d.properties.name=='Minnesota'});if(mn){var b=p.bounds(mn),x=b[0][0],mx=b[1][0],y=b[0][1],my=b[1][1],wd=mx-x,ht=my-y,sz=30,gp=10,wo=20;n.push({name:'Minnesota North District',x:x+(wd/2)-(sz/2)-wo,y:y+(ht/2)-sz-(gp/2)},{name:'Minnesota South District',x:x+(wd/2)-(sz/2)-wo,y:y+(ht/2)+(gp/2)})}var wi=st.features.find(function(d){return d.properties.name=='Wisconsin'});if(wi){var b=p.bounds(wi),x=b[0][0],mx=b[1][0],y=b[0][1],my=b[1][1],wd=mx-x,ht=my-y,sz=30,gp=10,eo=5,dw=10;n.push({name:'Wisconsin North District',x:x+(wd/2)-(sz/2)+eo,y:y+(ht/2)-sz-(gp/2)+dw},{name:'Wisconsin South District',x:x+(wd/2)-(sz/2)+eo,y:y+(ht/2)+(gp/2)+5})}var il=st.features.find(function(d){return d.properties.name=='Illinois'});if(il){var b=p.bounds(il),x=b[0][0],mx=b[1][0],y=b[0][1],my=b[1][1],wd=mx-x,ht=my-y,sz=25,eo=5,pd=15;n.push({name:'Northern Illinois District',x:x+(wd/2)-(sz/2)+eo,y:y+pd},{name:'Central Illinois District',x:x+(wd/2)-(sz/2)+eo,y:y+(ht/2)-(sz/2)},{name:'Southern Illinois District',x:x+(wd/2)-(sz/2)+eo,y:my-sz-pd})}s.selectAll('.ngd').data(n).enter().append('rect').attr('class',function(d){return'state region-'+d.name.replace(/\s+/g,'-')}).attr('x',function(d){return d.x}).attr('y',function(d){return d.y}).attr('width',function(d){return d.name.includes('Illinois')?25:(d.name.includes('Iowa')||d.name.includes('Minnesota')||d.name.includes('Wisconsin'))?30:40}).attr('height',function(d){return d.name.includes('Illinois')?25:(d.name.includes('Iowa')||d.name.includes('Minnesota')||d.name.includes('Wisconsin'))?30:40}).attr('fill',function(d){return gc(gd()[d.name])}).attr('stroke','#fff').attr('stroke-width',1).style('cursor','pointer').on('mouseover',function(e,d){s.selectAll('.region-'+d.name.replace(/\s+/g,'-')).style('stroke','#333').style('stroke-width','2px');var v=gd()[d.name];t.html('<strong>'+d.name+'</strong><br/>'+(v?gl()+': '+fm(v):'Non-geographic')).style('left',(e.pageX+10)+'px').style('top',(e.pageY-28)+'px').classed('show',true)}).on('mouseout',function(){s.selectAll('.state').style('stroke','#fff').style('stroke-width','1px');s.selectAll('rect').style('stroke','#fff').style('stroke-width','1px');t.classed('show',false)})});function sw(t){c=t;document.querySelectorAll('.data-toggle').forEach(function(b){b.classList.remove('active')});document.getElementById('btn-'+t).classList.add('active');s.selectAll('.state').each(function(){var e=d3.select(this),d=e.datum();if(d&&d.properties){var n=d.properties.name;e.attr('fill',(n=='Iowa'||n=='Minnesota'||n=='Wisconsin'||n=='Illinois')?'#e0e0e0':gc(gv(n)))}});s.selectAll('rect').each(function(){var e=d3.select(this),d=e.datum();if(d&&d.name)e.attr('fill',gc(gd()[d.name]||0))})}
</script>
</body>
</html>